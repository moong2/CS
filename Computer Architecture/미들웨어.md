# 미들웨어란?

- 서로 다른 애플리케이션이 서로 통신하는 데 사용되는 소프트웨어
- 다양한 네트워크, 애플리케이션, 데이터베이스 등 간의 상호작용을 쉽고 효율적으로 만듦
- 미들웨어는 데이터 관리, 애플리케이션 서비스, 메시징, 인증, API 관리 등 다양한 기능을 제공
- 복잡한 분산 시스템에서 통신, 데이터 교환, 처리 등을 원활하게 함

# WS

- **Web Server**
- 정적 컨텐츠 (HTML, CSS, 이미지 등)를 처리함
- 클라이언트(브라우저)의 요청을 받아 해당하는 파일 반환
- 가벼운 요청 처리에 효율적
- 요청 관리, 로드밸런싱, 캐시 등의 기능 제공

# WAS

- **Web Application Server**
- 동적 컨텐츠 처리
- 서버 사이드 스크립트(PHP, Java, Python)를 실행하여 동적으로 콘텐츠 생성
- 데이터베이스와의 상호작용을 포함하여 복잡한 비즈니스 로직 처리
- 웹 서버 + 웹 컨테이너
- 여러 대의 WAS 사용 가능

# WS과 WAS 분리 이유

- **부하 분산과 리소스 관리**
    - WS와 WAS를 분리함으로써, 정적 컨텐츠와 동적 컨텐츠의 처리를 분리할 수 있어 시스템의 전체적인 부하를 효율적으로 관리
    - 웹 서버는 정적 컨텐츠에 대한 빠른 응답을 담당하고, 애플리케이션 서버는 보다 복잡한 처리를 담당
    - WAS가 정적 컨텐츠 요청까지 처리하면, 부하가 커지고 동적 컨텐츠 처리가 지연되면서 수행 속도가 느려짐 → 페이지 노출 시간 늘어나는 문제 발생
- **보안**
    - 외부에 노출되는 웹 서버는 보안상 취약할 수 있는데, 애플리케이션 서버를 별도로 두어 내부 네트워크에 위치시킴으로써 보안 위험을 줄일 수 있음
- **확장성과 유연성**
    - 서비스의 규모가 확장됨에 따라, WS와 WAS를 따로 관리하면 리소스 할당과 확장을 보다 유연하게 진행
    - 서로 다른 요구 사항을 가진 두 시스템을 별도로 최적화하고 확장
- **유지보수와 업데이트 용이성**
    - 소프트웨어 업데이트 및 유지보수 작업을 더 쉽게 함
    - WS와 WAS를 분리하면 한쪽의 변경사항이 다른 쪽에 미치는 영향을 최소화할 수 있음

![Untitled](https://prod-files-secure.s3.us-west-2.amazonaws.com/9fd9710a-ab1c-4717-95a9-0b9e811020b5/6b9b5bd7-dcf1-4429-9a5d-dc985a0d0af2/Untitled.png)

1. 클라이언트의 요청을 먼저 웹 서버가 받은 다음, WAS에게 보내 관련된 Servlet을 메모리에 올림
    
2. WAS는 web.xml을 참조해 해당 Servlet에 대한 스레드를 생성 (스레드 풀 이용)
    
3. 이때 HttpServletRequest와 HttpServletResponse 객체를 생성해 Servlet에게 전달
    
    > 스레드는 Servlet의 service() 메소드를 호출
    > 
    > service() 메소드는 요청에 맞게 doGet()이나 doPost() 메소드를 호출
    
4. doGet()이나 doPost() 메소드는 인자에 맞게 생성된 적절한 동적 페이지를 Response 객체에 담아 WAS에 전달
    
5. WAS는 Response 객체를 HttpResponse 형태로 바꿔 웹 서버로 전달
    
6. 생성된 스레드 종료하고, HttpServletRequest와 HttpServletResponse 객체 제거