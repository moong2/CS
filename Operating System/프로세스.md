# 프로세스란?
- 실행 중인 프로그램
- 하나의 프로그램에 여러 개의 프로세스 생성 가능 -> 메모리 배치가 다를 수 있음
	ex) 웹 브라우저 여러 개 오픈
> 💡 프로그램 그 자체는 프로세스가 아님
## 메모리 배치
![](https://i.imgur.com/1DqLRq8.png)
1. **text** : 실행 코드
2. **data** : 전역 변수
3. **heap** : 프로그램 실행 중에 동적으로 할당되는 메모리
4. **stack** : 함수 호출 시 임시 데이터 저장장소
## 상태
![](https://i.imgur.com/Cb1vS1w.png)
1. **new** : 프로세스 생성
2. **ready** : 프로세스가 CPU에 할당되길 기다림
3. **running** : 명령어 실행
4. **waiting** : 프로세스가 어떤 이벤트가 일어나길 기다림
5. **terminated** : 프로세스 실행 종료
## PCB
- 프로세스 제어 블록 (Process Control Block)
![](https://i.imgur.com/3pnMwQf.png)
1. **프로세스 상태** : new, ready, running, waiting, terminated
2. **프로그램 카운터** : 프로세스가 다음에 실행할 명령어의 주소
3. **레지스터** : CPU가 현재 처리하고 있는 데이터. PC(프로그램 카운터)와 함께 나중에 프로세스가 다시 스케줄될 때 계속 올바르게 실행할 수 있도록 인터럽트 발생 시 저장
# 프로세스 스케줄링
## 다중 프로그래밍
- 각 CPU 코어는 한 번에 하나의 프로세스를 실행
- 초과 프로세스는 코어가 사용 가능해진 후 스케줄 될 때까지 waiting 상태
## 스케줄링 큐
- 연결리스트
- ![](https://i.imgur.com/H6NbkGb.png)
- 종료 시점에 모든 큐에서 제거되고 PCB 및 자원 반환
# 프로세스 생성
- 프로세스는 여러 개의 새로운 프로세스를 만들어 **트리**를 형성함
> 	- **부모 프로세스** : 생성하는 프로세스
> 	- **자식 프로세스** : 생성된 프로세스
- **pid** : 프로세스 식별자. idx로 사용됨
![](https://i.imgur.com/iV2hLoT.png)
- pid가 1인 **systemd**가 모든 프로세스의 루트 프로세스
## 메모리적 가능성
1. 자식 프로세스는 부모와 똑같은 프로그램과 데이터를 가짐
2. 자식 프로세스가 자신에게 적재될 새로운 프로그램을 가짐
## 메소드
![](https://i.imgur.com/iJPqzfV.png)
### fork()
- 부모 프로세스의 복사본을 만듦
- 부모 프로세스의 모든 코드, 데이터, 힙 영역이 자식 프로세스로 복사
- fork() 이후에는 부모 프로세스와 자식 프로세스가 독립적으로 병렬 실행되어 각가 별도의 주소 공간을 가지게 됨
- 자식프로세스는 반환값으로 0을 반환
> 💡 프로세스 복제

### exec()
- 프로세스의 현재 주소 공간을 새로운 프로그램으로 대체
- `fork()`와 결합하여 사용하며 부모 프로세스가 실행되는 동안 자식 프로세스가 다른 작업을 수행할 수 있음
> 💡 새로운 프로그램으로의 전환

### wait()
- 부모 프로세스가 자식프로세스를 종료될 때까지 기다리기 위해 사용
